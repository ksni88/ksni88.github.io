<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JAVA,����ģʽ,��̬����," />








  <link rel="shortcut icon" type="image/x-icon" href="/uploads/head.png?v=0.5.0" />






<meta name="description" content="������ѧϰ�Ĺ�����һֱ���������ָߴ��ϵļ������ʻ���д�����ж�̬������������֮һ��֮ǰֻ���˽�����̬�����Ǵ���ģʽ��һ��ʵ�֣�����JDK�Ķ�̬�����ǻ��ڽӿڵģ�CGlib(Code Generation Library)�Ķ�̬�����ǻ������ģ�ͨ����̬����������ԭ��ʵ�ֵĻ�����">
<meta property="og:type" content="article">
<meta property="og:title" content="��̬����">
<meta property="og:url" content="http://ksni88.github.io/动态代理/index.html">
<meta property="og:site_name" content="栖静林">
<meta property="og:description" content="������ѧϰ�Ĺ�����һֱ���������ָߴ��ϵļ������ʻ���д�����ж�̬������������֮һ��֮ǰֻ���˽�����̬�����Ǵ���ģʽ��һ��ʵ�֣�����JDK�Ķ�̬�����ǻ��ڽӿڵģ�CGlib(Code Generation Library)�Ķ�̬�����ǻ������ģ�ͨ����̬����������ԭ��ʵ�ֵĻ�����">
<meta property="og:image" content="http://cevxd.img47.wal8.com/img47/542077_20160404152451/14622571186.png">
<meta property="og:updated_time" content="2016-05-03T06:32:05.839Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="��̬����">
<meta name="twitter:description" content="������ѧϰ�Ĺ�����һֱ���������ָߴ��ϵļ������ʻ���д�����ж�̬������������֮һ��֮ǰֻ���˽�����̬�����Ǵ���ģʽ��һ��ʵ�֣�����JDK�Ķ�̬�����ǻ��ڽӿڵģ�CGlib(Code Generation Library)�Ķ�̬�����ǻ������ģ�ͨ����̬����������ԭ��ʵ�ֵĻ�����">
<meta name="twitter:image" content="http://cevxd.img47.wal8.com/img47/542077_20160404152451/14622571186.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6269574853532059000,
      author: '博主'
    }
  };
</script>

  <title> ��̬���� | 栖静林 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?dc8c3422caa41521411bcb96984a10f6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">栖静林</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">不忘初心，方得始终</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                ��̬����
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-01T16:47:55+08:00" content="2016-05-01">
              2016-05-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JAVA/" itemprop="url" rel="index">
                    <span itemprop="name">JAVA</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/动态代理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="动态代理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>������ѧϰ�Ĺ�����һֱ���������ָߴ��ϵļ������ʻ���д�����ж�̬������������֮һ��֮ǰֻ���˽�����̬�����Ǵ���ģʽ��һ��ʵ�֣�����JDK�Ķ�̬�����ǻ��ڽӿڵģ�CGlib(Code Generation Library)�Ķ�̬�����ǻ������ģ�ͨ����̬����������ԭ��ʵ�ֵĻ���������һЩ��ǿ���ܻ������������ȵȣ�����˵��ͷͷ�ǵ��������ǲ�������֪��֪�ף�һ���������������ڽӿ���ʲô��˼������������ʲô��˼��Ϊʲô����ô����̬����JDK�Ķ�̬��������ô���Ƴ����ģ�������ͨ�����Ľҿ���̬�����Ľ���ǰ��������������ô��Ϯ�ɸߴ��ϵġ�</p>
<h2 id="����gʽ"><a href="#����gʽ" class="headerlink" title="����ģʽ"></a>����ģʽ</h2><h3 id="����"><a href="#����" class="headerlink" title="����"></a>����</h3><p>���¸�������GOF������Design Patterns�������뱾��Ӣ�İ档</p>
<blockquote>
<p><strong>����ģʽ</strong><br>    Ϊ���������ṩһ�ִ����Կ��ƶ����������ķ��ʡ�<br><strong>Proxy Pattern</strong><br>    Provide a surrogate or placeholder for another object to control access to it.  </p>
</blockquote>
<p>ͨ�׵㽲���ڴ���ģʽ�У�������������ɫ��������proxy�ͱ�������real��������real�ķ��ʶ���ͨ��proxy�������ɵġ�����˵real�������ǲ��ɼ��Ļ���͸���ģ���Ϊ���Ƕ��⹫���ķ�����һģһ���ģ�ͨ��ʵ����ͬ�Ľӿڻ��̳���ͬ���ౣ֤������ʱproxy�൱��һ���н飬������������������realʱ��proxy������һЩ�������������簲ȫ��֤����¼������־�ȡ�����ͨ��������UMLͼ�����͡�</p>
<h3 id="gʽ�����ru"><a href="#gʽ�����ru" class="headerlink" title="ģʽ�����ɽṹ"></a>ģʽ�����ɽṹ</h3><p>�����Ի��ڽӿ�Ϊ�������������Ǵ���ģʽ��UMLͼ��<br><img src="http://cevxd.img47.wal8.com/img47/542077_20160404152451/14622571186.png" alt="UMLͼ"><br>����ģʽ�������ֽ�ɫ��</p>
<ul>
<li>��������(Subject)������������һ���ӿڣ��ýӿ��Ƕ��������Ĵ��������õĽӿڣ�����RealSubject��Proxy��ʵ�ֵĽӿڡ�</li>
<li>ʵ������(RealSubject)��ʵ��������ʵ�ֳ��������ӿڵ��ࡣʵ��������ʵ���Ǵ�����ɫʵ����Ҫ�����Ķ�����</li>
<li>����(Proxy)��������ʵ�ֳ��������ӿڵ���(������ʵ������ʵ������ͬ�Ľӿ�)���������������ӿ������ı������ñ�����������RealSubject��ʵ�����ã�����һ����������ʵ���Ϳ��Կ��ƶ�����������RealSubject��ʵ�����ʣ������Կ��ƶ��������������ķ��ʡ�</li>
</ul>
<h3 id="һ������"><a href="#һ������" class="headerlink" title="һ������"></a>һ������</h3><p>��¼ע��������Ļ������ܣ��������ǻ�����¼��¼��ʱ�䣬�Ϳ����ô����������ɡ�<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//�������⣬ͳһ���⹫���ķ���</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ʵ�����⣬�����ǲ��ɼ���</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		System.out.println(username + <span class="string">"��¼�ɹ�"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//������������ʵ���������ʵ��н�</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImplProxy</span> <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//����������ʵ��</span></span><br><span class="line">	IUserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"��ǰʱ�䣺"</span> + Calendar.getInstance().toString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//���ñ��������ķ���</span></span><br><span class="line">		userService.login(username);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="��̬����"><a href="#��̬����" class="headerlink" title="��̬����"></a>��̬����</h3><p>�ϱ�д���������ڶ�̬������ǰ����<strong>��̬��������̬��ʲô��˼�أ������ϱߵĴ��룬����д���ģ�<em>�������ķ���</em>��<em>��������ԭʼ��</em>��<em>�������Ľӿ�</em>����д���̶������ģ���login������UserServiceImpl����IUserService�ӿ���ȷ���ġ�����̬�����Ķ�̬����ָ�������ǲ�ȷ���ģ�δ֪�ģ��ɱ��ģ�����д���ġ�</strong>�ǲ��ǻ���̫��������������һ�¾�̬����������Щȱ�㣬Ϊʲô��Ҫ��̬������</p>
<p>��һ��ȱ�㣬���ڽӿ�IUserService���������������ķ���������ע�ᡢ�޸ĸ������ϵȣ��Ǿ�Ҫ�ڴ������ж�ÿһ����������һ��һ�Ĵ���������ÿһ�������������ǳ����ƣ��ṹ���£�<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//һ�㻯�Ĵ������еķ���</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResultType <span class="title">methodName</span><span class="params">(ParamType paramName0, ParamType paramName1...)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//ʵ�ʵ���ǰ����ǿ���ܡ���������</span></span><br><span class="line">	doSomethingBefore();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//���ñ��������ķ���</span></span><br><span class="line">	ResultType result = target.methodName(paramName0, paramName1...);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ʵ�ʵ��ú�����ǿ���ܡ���������</span></span><br><span class="line">	doSomethingAfter();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//���ر������෽����ִ�н���</span></span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>�����������кܶ���Ҫ�������ķ���ʱ�������ڴ����ظ������Ĵ��롣</p>
<p>�ڶ���ȱ�㣬�ϱߵ�һ��ȱ��ֻ������<em>�������ķ���</em>��Ҫ�仯ʱ�����Ĳ��㣬������<em>��������ԭʼ��</em>��<em>�������Ľӿ�</em>Ҳ��Ҫ�仯�أ��������ڲ�ֻ���û����صĽӿ�(IUserService)��Ҫ��¼����ʱ�䣬�����κνӿڶ���Ҫ��¼����������ǰ��N���ӿڣ�ÿ���ӿ�����M���������ǰ��վ�̬����һ��һ���б��룬��������ҪдN*M���������������ҽṹ�ǳ����ƣ����������ͱ�ը��</p>
<p>��Ӧ����ô�Ľ��أ�</p>
<h3 id="��̬����-1"><a href="#��̬����-1" class="headerlink" title="��̬����"></a>��̬����</h3><p>�������������ϱߵ�����ȱ�㣬��һ����������̬��������ô�����ɶ�̬�����ġ���������д��ô���ظ��ģ����ϲ���һ�𣬾���Ҫ��д���ı仯�Ĳ���ת��Ϊ��̬�ɱ��ġ�</p>
<p>�����ϱߴ��������Ľṹ���仯�Ĳ���ֻ��һ�У������ñ��������ķ��������б�������target���Բ�ͬ����Ӧ�ķ���methodNameҲ���Բ�ͬ����̬������target��methodName��д���ģ������ϱߵ�UserServiceImpl��login�����ܲ��ܰ�target��methodNameд�ɱ���������String���͵ģ�Ȼ��������ʱ���ݴ��������������ͷ�����ʵ�ֶ�̬����ִ���أ��������������ּ����𣿻���������û���뵽�����أ���ʱ�ϱߵĴ��������Ľṹ�Ϳ���д��������ʽ��(ʾ�����룬����ϸ��)��<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ʹ�÷�������ͨ�õĴ�������</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">methodProxy</span><span class="params">(String targetFullName, String methodName, Object[] args)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//ʵ�ʵ���ǰ����ǿ���ܡ���������</span></span><br><span class="line">	doSomethingBefore();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span><br><span class="line">	 *���ñ��������ķ���</span><br><span class="line">	 *1. ����targetFullName������ȡ����������ʵ��</span><br><span class="line">	 *2. ����methodName��ȡ������������ʵ��methodInstance (java.lang.reflect.Method����)</span><br><span class="line">	 *3. ����methodInstance���͵�invoke�������ɵ���</span><br><span class="line">	 */</span></span><br><span class="line">	Object target = Class.forName(targetFullName).newInstance();</span><br><span class="line">	Method methodInstance = Class.forName(targetFullName).getMethod(methodName, <span class="keyword">new</span> Class[] &#123;</span><br><span class="line">							args[<span class="number">0</span>].getClass(), </span><br><span class="line">							args[<span class="number">1</span>].getClass(),</span><br><span class="line">							......</span><br><span class="line">							&#125;);</span><br><span class="line">	Object result = methodInstance.invoke(target, args);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ʵ�ʵ��ú�����ǿ���ܡ���������</span></span><br><span class="line">	doSomethingAfter();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//���ر������෽����ִ�н���</span></span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>����д�û��Ϳ���������һ�α�д���������á��ˣ�ÿ�������������еĴ����������������ϱ����������ò�����methodProxy����ͬ��ֻ�ǣ��ڲ�ͬ�Ĵ������У�����targetFullName��ͬ���ڲ�ͬ�ķ����У�����methodName��ͬ����ʱ������<em>��������ԭʼ��</em>��<em>�������Ľӿ�</em>��˭������Ӧ�Ĵ����࣬�ṹ���ǳ����ƣ�������ʾ��<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//������������ʵ���������ʵ��н�</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyClassName</span> <span class="keyword">implements</span> <span class="title">SubjectInterfaceName</span> </span>&#123;</span><br><span class="line">	<span class="comment">//����������ȫ����</span></span><br><span class="line">	String targetFullName;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//����ʱ�󶨱���������ȫ����</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ProxyClassName</span><span class="params">(String targetFullName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.targetFullName = targetFullName;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//һ�㻯�Ĵ������еķ���</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultType <span class="title">methodName0</span><span class="params">(ParamType paramName0, ParamType paramName1...)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//�����ϱߵ�ͨ�÷���</span></span><br><span class="line">		<span class="keyword">return</span> (ResultType) methodProxy(targetFullName, methodName0, <span class="keyword">new</span> Object[] &#123;</span><br><span class="line">							paramName0,</span><br><span class="line">							paramName1,</span><br><span class="line">							......</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//һ�㻯�Ĵ������еķ���</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ResultType <span class="title">methodName1</span><span class="params">(ParamType paramName0, ParamType paramName1...)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//�����ϱߵ�ͨ�÷���</span></span><br><span class="line">		<span class="keyword">return</span> (ResultType) methodProxy(targetFullName, methodName1, <span class="keyword">new</span> Object[] &#123;</span><br><span class="line">							paramName0,</span><br><span class="line">							paramName1,</span><br><span class="line">							......</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//......����SubjectInterfaceName�ӿ��ж����ķ�����������ʵ��</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ǰ�������Ѿ�����<em>�������ķ���</em>�аѱ仯�Ĳ���ת��Ϊ��̬�ɱ��Ĳ��֣�ͨ������ʵ����<em>�������ķ���</em>�ĸ��ƣ�ʹ�÷������ظ��Ĳ��֡�һ�α�д���������á�����ô�����ϱ������������Ľṹ������û�о�����Ҳ�кܶ��ظ������ĵط��أ����������кܶ����ϱ����ֽṹ�Ĵ����࣬���ǲ�ͬ�ĵĲ�������Щ�أ�1.������������ProxyClassName��2.��������ʵ�ֵĽӿ���SubjectInterfaceName��3.�ڲ���������ǩ��methodName0(args)��methodName1(args)…������֮�⣬���еĴ�����ȫһ��������û��ʲô�취�ܹ�������ģ��һ�������ݸ�����ͬ������ProxyClassName���ӿ���SubjectInterfaceName�Զ��������Ͻṹ�Ĵ����������أ��ǵģ���û������������Ҫ�����ô������ɴ����ļ������񹤳�һ���������������ࡣ�������������ּ����𣿻���������û���뵽<strong>�ֽ������ɼ���</strong>�أ���ȫ���԰����ϱߵ�ģ��ƴ�ճ�������Ҫ�Ĵ����࣬����ֻ��Ҫ�ṩ��Ҫʵ�ֵĽӿ�SubjectInterfaceName������ProxyClassNameû��Ҫ�������ǿ����Զ����ɣ��ڲ������з���������ͨ���Խӿڽ��з�����ȡ��</p>
<p>��ʱ���Ǹ������ɵĴ���ģʽ�ͽ������˶�̬������ֻ��Ҫ�����Լ�дmethodProxy�����еĶ���������Ȼ��ָ��һ���ӿڣ��͵õ���������Ҫ�Ĵ����࣬�򵥷��㣬��Ҫ���������ɲ��֣�</p>
<ol>
<li>�����������ֽ������ɼ���������ָ���Ĵ����ࣻ</li>
<li>ͨ�õĴ���������<br>������������α������ʽд��һ���ṹ��������̫�ñ�����ǻ���ֱ�ӿ�JDK�Ķ�̬�����ɣ������ϱߵ����⣬��Ӧ�þ������ᵽJDK���Ƶ������ˡ�</li>
</ol>
<h2 id="JDK�K�̬����"><a href="#JDK�K�̬����" class="headerlink" title="JDK�Ķ�̬����"></a>JDK�Ķ�̬����</h2><p>��JDK�Ķ�̬����ʵ���У���Ӧ�ϱ߹�������������Proxy����Ӧͨ�ô�������methodProxy���ǽӿ�InvocationHandler�е�invoke������Ϊʲô�ǽӿ��أ���Ϊ�������ǿ���ͨ��ʵ�ָýӿ��Զ�����Ҫ����ǿ���ܻ�����������������������Ŀ�ġ�������Proxy����һ��InvocationHandler���͵ĳ�Ա����h��Ȼ����Proxy���ɵĴ�����(extends Proxy implements SubjectInterfaceName)�У����еķ������ã�����ͨ��”super.h.invoke(Object, Method, object[])”���д���ί�е������Զ�����invoke�����С���������ʹ��JDK�Ķ�̬����ʵ���ʼ�ĵ�¼���ܣ������Ľ���Ч����<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//�������⣬ͳһ���⹫���ķ���</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ʵ�����⣬�����ǲ��ɼ���</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		System.out.println(username + <span class="string">"��¼�ɹ�"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//�Զ�����InvocationHandlerʵ���࣬��Ҫ��������ͨ�õ��÷����еĶ�������</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">	<span class="comment">//��������Ŀ����</span></span><br><span class="line">	<span class="keyword">public</span> Object target;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ͨ�����캯������Ŀ����</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyInvocationHandler</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.target = target;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ͨ�õĵ��÷���</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span><br><span class="line">			<span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		<span class="comment">//ʵ�ʵ���ǰ</span></span><br><span class="line">		System.out.println(<span class="string">"֮ǰ�Ķ�������"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//���ô������ķ���</span></span><br><span class="line">		Object result = method.invoke(target, args);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ʵ�ʵ��ú�</span></span><br><span class="line">		System.out.println(<span class="string">"֮���Ķ�������"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//���ص��ý���</span></span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//ͨ��Proxy���ľ�̬������ȡ��������ʵ��</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Proxy.newProxyInstance(</span><br><span class="line">				<span class="comment">//��ǰ�߳������ĵ���������</span></span><br><span class="line">				Thread.currentThread().getContextClassLoader(),  </span><br><span class="line">				<span class="comment">//Ŀ����ʵ�ֵ����нӿ�</span></span><br><span class="line">				target.getClass().getInterfaces(), </span><br><span class="line">				<span class="comment">//��ǰ�࣬��Ҫ���ڵ���invoke����</span></span><br><span class="line">				<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//������</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//������Ҫ��������</span></span><br><span class="line">		MyInvocationHandler invocationHandler = <span class="keyword">new</span> MyInvocationHandler(<span class="keyword">new</span> UserServiceImpl());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//�����ֽ������ɼ������ɴ����࣬����ȡ��ʵ��(ע��������������IUserService)</span></span><br><span class="line">		IUserService proxy = (IUserService) invocationHandler.getProxy();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//͸���ص��ö�Ӧ�ķ���</span></span><br><span class="line">		proxy.login(<span class="string">"ksni88"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ִ�н�����</span><br><span class="line">֮ǰ�Ķ�������</span><br><span class="line">ksni88��½�ɹ�</span><br><span class="line">֮���Ķ�������</span><br></pre></td></tr></table></figure></p>
<p>���Կ�����ʹ�ö�̬����ʱ�����Ǹ��������Լ�д�����ֻ࣬�ö�������������Ҫ�Ķ���������Ȼ��ָ����Ҫ��������Ŀ���࣬������һ�й�����ʡ���ˣ����Ⱦ�̬������Ҫ������Ч�Ķࡣ������������ܸо�����̫��������Ϊ����û���Լ�д�����࣬��֪����������ʲô���ӣ���Ҫ��һ�۲ŷ��ģ��԰ɣ����ǿ������ϱ�main()�����м����������䣺<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.setProperty(<span class="string">"sun.misc.ProxyGenerator.saveGeneratedFiles"</span>, <span class="string">"true"</span>);</span><br></pre></td></tr></table></figure></p>
<p>֮��<strong>����ĿĿ¼���½�Ŀ¼com\sun\proxy</strong>��Ȼ���ٴ����г��򣬽��ڸղ�Ŀ¼�²���һ����Ϊ”$Proxy0.class”�Ĵ�����Class�ļ����������Զ����ɵĴ����࣬����ʹ��<em><a href="http://jd.benow.ca/" target="_blank" rel="external">�����빤��</a></em>��һ������ʲô����<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> $<span class="title">Proxy0</span></span><br><span class="line">  <span class="keyword">extends</span> <span class="title">Proxy</span></span><br><span class="line">  <span class="keyword">implements</span> <span class="title">IUserService</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Method m1;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Method m0;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Method m3;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Method m2;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> $Proxy0(InvocationHandler paramInvocationHandler)</span><br><span class="line">    <span class="keyword">throws</span> </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">super</span>(paramInvocationHandler);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object paramObject)</span></span><br><span class="line">    <span class="keyword">throws</span> </span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> **((Boolean)<span class="keyword">this</span>.h.invoke(<span class="keyword">this</span>, m1, <span class="keyword">new</span> Object[] &#123; paramObject &#125;)).booleanValue();**</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Error|RuntimeException localError)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> localError;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable localThrowable)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(localThrowable);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">throws</span> </span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> **((Integer)<span class="keyword">this</span>.h.invoke(<span class="keyword">this</span>, m0, <span class="keyword">null</span>)).intValue();**</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Error|RuntimeException localError)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> localError;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable localThrowable)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(localThrowable);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> **login**(String paramString)</span><br><span class="line">    <span class="keyword">throws</span> </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">      **<span class="keyword">this</span>.h.invoke(<span class="keyword">this</span>, m3, <span class="keyword">new</span> Object[] &#123; paramString &#125;);**</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Error|RuntimeException localError)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> localError;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable localThrowable)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(localThrowable);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">toString</span><span class="params">()</span></span><br><span class="line">    <span class="keyword">throws</span> </span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> **(String)<span class="keyword">this</span>.h.invoke(<span class="keyword">this</span>, m2, <span class="keyword">null</span>);**</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Error|RuntimeException localError)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> localError;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable localThrowable)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(localThrowable);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">static</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">      m1 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"equals"</span>, <span class="keyword">new</span> Class[] &#123; Class.forName(<span class="string">"java.lang.Object"</span>) &#125;);</span><br><span class="line">      m0 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"hashCode"</span>, <span class="keyword">new</span> Class[<span class="number">0</span>]);</span><br><span class="line">      m3 = Class.forName(<span class="string">"testProxy.IUserService"</span>).getMethod(<span class="string">"login"</span>, <span class="keyword">new</span> Class[] &#123; Class.forName(<span class="string">"java.lang.String"</span>) &#125;);</span><br><span class="line">      m2 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"toString"</span>, <span class="keyword">new</span> Class[<span class="number">0</span>]);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (NoSuchMethodException localNoSuchMethodException)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchMethodError(localNoSuchMethodException.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (ClassNotFoundException localClassNotFoundException)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> NoClassDefFoundError(localClassNotFoundException.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ͨ�����Ϸ������õ��Ĵ��룬���Թ۲쵽�Զ����ɵĴ����������¼����ص㣺</p>
<ol>
<li>�ô������̳�Proxy�࣬ʵ����<em>��������ʵ�ֵĽӿ�</em>��</li>
<li>�ô������е����з������ã�ȫ��ί�е�����Proxy�ĳ�Ա����InvocationHandler�е�invoke�������Ӷ�ִ�ж��������ͷ������ã�</li>
<li>�ô����಻��ʵ�������нӿ��ж����ķ���������д��Object���е�equals��hashCode��toString����������</li>
</ol>
<p>���������֪������û����ȫ���⶯̬���������ƺ��������������Ƕ���(�������������Ͷ࿴���飬������)�����ڲ���һ��ʼ���������⣬����Ҳ���Եõ������ˡ�</p>
<ol>
<li>ΪʲôJDK�Ķ�̬�����ǻ��ڽӿڵģ�—��Ϊ��Ҫ��һ���������ӿ��������������ͱ����������⹫���ķ�������JDK�Ķ�̬�������ɵĴ������Ѿ��̳���Proxy�࣬����ֻ��ͨ���ӿ��������ˡ���CGlib���ɵĴ����࣬��ֱ�Ӽ̳б��������ģ������ǻ������ġ�</li>
<li>ʲô�ǻ��ڽӿڣ������ࣿ—����һ�ʵĻش�Ҳ���Կ�������ν�Ļ��ڽӿڻ��࣬���������ͱ����������⹫���ķ������������ӿڶ����ġ�</li>
<li>��ô����̬������ô���Ƶģ�—�����þ��ٶ࿴���飬���������ɡ�</li>
</ol>
<h2 id="��̬�������w�"><a href="#��̬�������w�" class="headerlink" title="��̬�������ŵ�"></a>��̬�������ŵ�</h2><p>�������һ������á���������JAVA���������е�ԭ�����ܽᶯ̬�������ŵ㣬�����ܽ���ʵ����̫���ˣ�һ��������һ�°ɡ�</p>
<blockquote>
<p>��̬��������ν�ġ���̬����������ʹ��Java����ʵ�ʱ�д�˴������ġ���̬���������Եģ��������Ʋ�����ʡȥ�˱�д��������һ�㹤����������ʵ���˿�����ԭʼ���ͽӿڻ�δ֪��ʱ�򣬾�ȷ���������Ĵ�����Ϊ������������ԭʼ������ֱ����ϵ�󣬾Ϳ��Ժ������������ڲ�ͬ��Ӧ�ó���֮�С�</p>
</blockquote>
<p>��֮ǰ�ǲ��Ǿ��ò���ʡ�˵������𣿣���������Ҳ�ǡ�</p>

      
    </div>
    
    <div>
      
        
      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JAVA/" rel="tag">#JAVA</a>
          
            <a href="/tags/����gʽ/" rel="tag">#����ģʽ</a>
          
            <a href="/tags/��̬����/" rel="tag">#��̬����</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/初探MySQL索引/" rel="next" title="初探MySQL索引">
                <i class="fa fa-chevron-left"></i> 初探MySQL索引
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="动态代理/"
           data-title="��̬����" data-url="http://ksni88.github.io/动态代理/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/head.png"
               alt="ksni88" />
          <p class="site-author-name" itemprop="name">ksni88</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
            <div class="links-of-blogroll-title">Links</div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://cruise1008.github.io/" target="_blank">海神</a>
                </li>
              
            </ul>
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#����gʽ"><span class="nav-number">1.</span> <span class="nav-text">����ģʽ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#����"><span class="nav-number">1.1.</span> <span class="nav-text">����</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gʽ�����ru"><span class="nav-number">1.2.</span> <span class="nav-text">ģʽ�����ɽṹ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#һ������"><span class="nav-number">1.3.</span> <span class="nav-text">һ������</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��̬����"><span class="nav-number">1.4.</span> <span class="nav-text">��̬����</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��̬����-1"><span class="nav-number">1.5.</span> <span class="nav-text">��̬����</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDK�K�̬����"><span class="nav-number">2.</span> <span class="nav-text">JDK�Ķ�̬����</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#��̬�������w�"><span class="nav-number">3.</span> <span class="nav-text">��̬�������ŵ�</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ksni88</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=0.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ksni88"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  

  

  

</body>
</html>
